let catalogData=[];const validationForm=()=>{const e=/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{6,10}$/,t=document.querySelector(".btn-send"),a=document.querySelector(".hero__form");t.disabled=!0,t.classList.add("disabled-btn"),a.addEventListener("input",()=>{e.test(a.phone.value)?(t.classList.remove("disabled-btn"),t.disabled=!1,a.phone.classList.remove("hero__input-error")):(t.classList.add("disabled-btn"),t.disabled=!0,a.phone.classList.add("hero__input-error"))})},catalogSwiperSlider=()=>{new Swiper(".catalog-slider",{slidesPerView:4,spaceBetween:29,initialSlide:0,centeredSlides:!1,breakpoints:{280:{spaceBetween:18,slidesPerView:1.3,centeredSlides:!0,initialSlide:1},300:{spaceBetween:18,slidesPerView:1.4,centeredSlides:!0,initialSlide:1},320:{spaceBetween:18,slidesPerView:1.5,centeredSlides:!0,initialSlide:1},390:{spaceBetween:22,slidesPerView:1.7,centeredSlides:!0,initialSlide:1},600:{spaceBetween:22,slidesPerView:2.3,centeredSlides:!0,initialSlide:1},800:{spaceBetween:22,slidesPerView:3.3,centeredSlides:!0,initialSlide:1},976:{spaceBetween:29,slidesPerView:4,centeredSlides:!1,initialSlide:0}},on:{resize(e){this.width<976&&(this.activeIndex=1)}}})},getCatalog=async()=>{catalogData=[],await fetch("https://voda-vyatskaya-7a164-default-rtdb.firebaseio.com/.json").then(e=>e.json()).then(e=>{catalogData=e.map(e=>e)})},renderCatalog=t=>{var e=document.querySelector(".catalog-slider"),a=(e.textContent="",catalogData.filter(e=>e.type===t));if(a.length){const n=document.createElement("div");n.classList.add("swiper-wrapper","catalog__wrapper"),e.append(n),a.forEach(e=>{var{img:e,price:t,title:a}=e,e=`
                    <div class="catalog__item swiper-slide">
                        <picture class="catalog__item-img">
                            <img
                                src="${e}"
                                alt="${a}"
                            />
                        </picture>
                        <h3 class="catalog__item-title">${a}</h3>
                        <div class="catalog__price-block">
                            <span class="catalog__item-price" data-price="${t}"
                                >${t}₽</span
                            >
                            <div
                                class="counter-block counter-block--catalog"
                            >
                                <button
                                    class="btn-counter btn-counter--catalog btn-counter--minus"
                                >
                                    -
                                </button>
                                <span class="quantity quantity--catalog"
                                    >1</span
                                >
                                <button
                                    class="btn-counter btn-counter--catalog btn-counter--plus"
                                >
                                    +
                                </button>
                            </div>
                        </div>
                        <a class="btn-send btn-send--catalog btn-to-scroll" href="#hero">
                            заказать
                        </a>
                    </div>
        `;n.insertAdjacentHTML("beforeend",e)}),catalogSwiperSlider(),scrollToSections({behavior:"smooth",block:"start",inline:"center"},".btn-to-scroll")}else e.innerHTML='<h2 class="error-title">По вашему запросу ничего не найдено</h2>'},catalogTabs=()=>{const t=document.querySelectorAll(".catalog__navigation-item");t.forEach(e=>{e.addEventListener("click",e=>{e=e.target;t.forEach(e=>{e.classList.remove("catalog__navigation-item--active")}),e.classList.add("catalog__navigation-item--active"),renderCatalog(e.dataset.type)})})},catalogItemsPrice=(catalogTabs(),()=>{document.querySelector(".catalog-slider").addEventListener("click",e=>{var t,a,n,l,e=e.target;e.classList.contains("btn-counter--plus")&&(t=e.closest(".counter-block").querySelector(".quantity"),n=+(a=e.closest(".catalog__price-block").querySelector(".catalog__item-price")).dataset.price,l=+t.textContent,t.textContent=++l,a.textContent=n*l+"₽"),e.classList.contains("btn-counter--minus")&&(t=e.closest(".counter-block").querySelector(".quantity"),n=+(a=e.closest(".catalog__price-block").querySelector(".catalog__item-price")).dataset.price,1<(l=+t.textContent))&&(t.textContent=--l,a.textContent=n*l+"₽")})}),disableScroll=()=>{var e=document.querySelectorAll(".fix-block");const t=window.innerWidth-document.body.offsetWidth+"px";document.body.style.overflow="hidden",document.body.style.paddingRight=t,e.length&&e.forEach(e=>{e.style.paddingRight=t})},enableScroll=()=>{var e=document.querySelectorAll(".fix-block");document.body.style.overflow="",document.body.style.paddingRight="",e.length&&e.forEach(e=>{e.style.paddingRight=""})},swiperReason=new Swiper(".reason__slider",{slidesPerView:3,spaceBetween:133,initialSlide:1,loop:!1,pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{280:{spaceBetween:0,centeredSlides:!0,initialSlide:1},992:{spaceBetween:133,centeredSlides:!1,initialSlide:1}},on:{resize(e){this.width<992&&(this.activeIndex=1)}}}),catalogNavigationSlider=new Swiper(".catalog__navigation-slider",{slidesPerView:4,spaceBetween:24,initialSlide:0,breakpoints:{280:{spaceBetween:22,slidesPerView:2,centeredSlides:!0,centeredSlidesBounds:!0},520:{spaceBetween:22,slidesPerView:3,centeredSlides:!0,initialSlide:0,centeredSlidesBounds:!0},700:{spaceBetween:22,slidesPerView:4,centeredSlides:!1,centeredSlidesBounds:!1}}}),headerToggleBg=()=>{const e=document.querySelector(".header"),t=document.documentElement.scrollHeight;window.addEventListener("scroll",()=>{768<document.documentElement.clientWidth&&window.pageYOffset>+t/7?e.style.backgroundColor="#ffffff":e.style.backgroundColor="",window.pageYOffset>3*t/4?e.style.display="none":e.style.display=""})},overlayEl=(headerToggleBg(),(handleBurger=()=>{const e=document.querySelector(".burger-btn"),t=document.querySelector("#headerNav");e.addEventListener("click",()=>{e.classList.contains("burger-btn--active")?(e.classList.remove("burger-btn--active"),t.classList.remove("nav--active")):(e.classList.add("burger-btn--active"),t.classList.add("nav--active"))})})(),document.querySelector(".overlay")),sendData=async e=>{var t=document.createElement("div");t.classList.add("loader"),overlayEl.append(t),disableScroll(),overlayEl.style.display="block",await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify({title:e.name||"Not name",phone:e.phone,userId:Date.now()}),headers:{"Content-type":"application/json; charset=UTF-8"}}),overlayEl.textContent="",overlayEl.style.display="",enableScroll(),renderInfoWindow()},handleMinForm=()=>{const t=document.querySelector(".hero__form");t.addEventListener("submit",async e=>{e.preventDefault();e={phone:t.querySelector(".hero__input").value};await sendData(e),t.reset()})},renderInfoWindow=(handleMinForm(),()=>{disableScroll(),overlayEl.style.display="block";var e=document.createElement("div"),t=(e.classList.add("info-msg"),document.createElement("h2"));t.textContent="Ваша заявка принята! Скоро с Вами свяжется наш оперетор!",e.append(t),overlayEl.append(e),setTimeout(()=>{overlayEl.textContent="",overlayEl.style.display="",enableScroll()},2e3)}),calculator=()=>{const t=document.querySelectorAll(".calculator__question-where");var e=document.querySelectorAll(".calculator__item-radio-where");const a=document.querySelectorAll(".calculator__question-cooking");var n=document.querySelectorAll(".calculator__item-radio-cooking");const l=document.getElementById("counterHumans"),o=document.getElementById("counterDays"),i=document.querySelector(".calculator__info-count"),c=document.querySelector(".calculator__info-price"),s={where:"",question:"",humans:1,days:1},r=()=>{let e=0;var t=30*(e="with cooking"===s.question?6*s.humans*s.days:3*s.humans*s.days);i.textContent=e,c.textContent=t};e.forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation()})}),t.forEach(e=>{e.addEventListener("click",()=>{t.forEach(e=>{e.classList.remove("calculator__question-label--active")}),e.classList.contains("calculator__question-label--active")||(e.classList.add("calculator__question-label--active"),s.where=e.querySelector("input").value)}),r()}),n.forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation()})}),a.forEach(e=>{e.addEventListener("click",()=>{a.forEach(e=>{e.classList.remove("calculator__question-label--active")}),e.classList.contains("calculator__question-label--active")||(e.classList.add("calculator__question-label--active"),s.question=e.querySelector("input").value),r()})}),l.querySelector(".btn-counter--minus").addEventListener("click",()=>{1<s.humans&&s.humans--,l.querySelector(".counter__number").textContent=s.humans,r()}),l.querySelector(".btn-counter--plus").addEventListener("click",()=>{s.humans++,l.querySelector(".counter__number").textContent=s.humans,r()}),o.querySelector(".btn-counter--minus").addEventListener("click",()=>{1<s.days&&s.days--,o.querySelector(".counter__number").textContent=s.days,r()}),o.querySelector(".btn-counter--plus").addEventListener("click",()=>{s.days++,o.querySelector(".counter__number").textContent=s.days,r()}),r()},init=(calculator(),async()=>{validationForm(),await getCatalog(),renderCatalog("water"),scrollToSections({behavior:"smooth",block:"start",inline:"center"},".btn-to-scroll"),catalogItemsPrice()});init();